var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.propertyIsEnumerable,i=(t,l,a)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a;import{d as n,r as o,c as s,a as c,b as d,n as r,t as u,o as m,e as p,w as v,f,g as y,h as _,i as h,v as g,F as b,j as w,k as V,l as T,m as E,s as B,p as C}from"./vendor.fd87fd94.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(l){const a=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((l,i)=>{const o=new URL(e,a);if(self[t].moduleMap[o])return l(self[t].moduleMap[o]);const s=new Blob([`import * as m from '${o}';`,`${t}.moduleMap['${o}']=m;`],{type:"text/javascript"}),d=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(s),onerror(){i(new Error(`Failed to import: ${e}`)),n(d)},onload(){l(self[t].moduleMap[o]),n(d)}});document.head.appendChild(d)})),self[t].moduleMap={}}}("assets/");const S=n({props:{step:{type:Number,default:1},min:{type:Number,default:0},max:{type:Number,default:10},modelValue:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=o({currentValue:e.modelValue}),a=s((()=>l.currentValue)),n=s((()=>m(e.modelValue)<e.min)),i=s((()=>u(e.modelValue)>e.max)),d=s((()=>{const t=r(e.step);return Math.max(r(e.modelValue),t)})),c=(e,t)=>(void 0===t&&(t=d.value),parseFloat(Math.round(e*Math.pow(10,t))/Math.pow(10,t)+"")),r=e=>{if(void 0===e)return 0;const t=e.toString(),l=t.indexOf(".");let a=0;return-1!==l&&(a=t.length-l-1),a},u=t=>{const l=Math.pow(10,d.value);return c((l*t+l*e.step)/l)},m=t=>{const l=Math.pow(10,d.value);return c((l*t-l*e.step)/l)},p=a=>{const n=l.currentValue;a>=e.max&&(a=e.max),a<=e.min&&(a=e.min),n!==a&&(t("update:modelValue",a),l.currentValue=a)};return{displayValue:a,minDisabled:n,maxDisabled:i,increase:()=>{if(i.value)return;const t=e.modelValue||0,l=u(t);p(l)},decrease:()=>{if(n.value)return;const t=e.modelValue||0,l=m(t);p(l)}}}}),x={class:"counter border_comp"},I={class:"counter_display"};S.render=function(e,t,l,a,n,i){return m(),c("div",x,[d("span",{class:r(["decrease",{isDisabled:e.minDisabled}]),onClick:t[0]||(t[0]=(...t)=>e.decrease&&e.decrease(...t))}," - ",2),d("label",I,u(e.displayValue),1),d("span",{class:r(["increase",{isDisabled:e.maxDisabled}]),onClick:t[1]||(t[1]=(...t)=>e.increase&&e.increase(...t))}," + ",2)])};const P=n({components:{StepNumber:S},setup(){const e=p(2);localStorage.setItem("particle_size",e.value),v(e,((e,t)=>{localStorage.setItem("particle_size",e),dispatchEventByName("particle_size_changed")}));const n=p(3e4);localStorage.setItem("particles_count",n.value),v(n,((e,t)=>{localStorage.setItem("particles_count",e),dispatchEventByName("particles_count_changed")}));const s=p("1");v(s,((e,t)=>{localStorage.setItem("color_type",e),dispatchEventByName("particle_color_changed")}));const d=o({colorOptions:[{value:"0",label:"Uniform"},{value:"1",label:"Movement angle"},{value:"2",label:"Speed"}]});return((e,n)=>{for(var o in n||(n={}))t.call(n,o)&&i(e,o,n[o]);if(l)for(var o of l(n))a.call(n,o)&&i(e,o,n[o]);return e})({particlesCount:n,particleSize:e,colorType:s},f(d))}}),U={class:"row"},M=d("div",{class:"row_item0"}," Particle size (physical pixel): ",-1),k={class:"row_item1"},z={class:"row"},N=d("div",{class:"row_item0"}," Particles count: ",-1),A={class:"row_item1"},O={class:"row"},R=d("div",{class:"row_item0"}," Particle color: ",-1),j={class:"row_item1"},L=["value"];P.render=function(e,t,l,a,n,i){const o=y("step-number");return m(),c(b,null,[d("div",U,[M,d("div",k,[_(o,{modelValue:e.particleSize,"onUpdate:modelValue":t[0]||(t[0]=t=>e.particleSize=t),min:1,max:5,step:1},null,8,["modelValue"])])]),d("div",z,[N,d("div",A,[_(o,{modelValue:e.particlesCount,"onUpdate:modelValue":t[1]||(t[1]=t=>e.particlesCount=t),min:1e4,max:2e5,step:1e4},null,8,["modelValue"])])]),d("div",O,[R,d("div",j,[h(d("select",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.colorType=t),class:"border_comp"},[(m(!0),c(b,null,w(e.colorOptions,(e=>(m(),c("option",{key:e.value,value:e.value},u(e.label),9,L)))),128))],512),[[g,e.colorType]])])])],64)};const F={components:{ParticlesParameter:P},setup(){const e=p("1");v(e,((e,a)=>{let n=document.getElementById("pfProperties"),i=document.getElementById("lbmProperties");var o;"1"===e?(n.style.display="block",i.style.display="none",o=t.value):(n.style.display="none",i.style.display="block",o=l.value),localStorage.setItem("field_animation_type",o),localStorage.setItem("field_type",e),dispatchEventByName("field_type")}));const t=p("2");v(t,((e,t)=>{localStorage.setItem("field_animation_type",e),dispatchEventByName("field_animation_type")}));const l=p("3");v(l,((e,t)=>{localStorage.setItem("field_animation_type",e),dispatchEventByName("field_animation_type")}));const a={msg:"Swipe on the canvas to apply external force."},n={msg:"Click on the canvas to add obstacle."},i=s((()=>"3"===l.value?[a,n]:[a])),o=s((()=>"3"===l.value?"Clean Added Obstacle":"Clean Canvas")),d=p(.02);return v(d,((e,t)=>{localStorage.setItem("fluid_viscosity",e),dispatchEventByName("fluid_viscosity_changed")})),{fieldType:e,fieldAnimationType:t,fluidAnimationType:l,fluidViscosity:d,tipsMsgList:i,cleanBtTitle:o}},methods:{onReset(){let e=document.getElementById("canvas_container");const t=new Event("canvas_reset");e.dispatchEvent(t)}}},D={id:"control_panel"},$=T(" Programmable Field "),J=T(" LBM Fluid "),X=d("div",{class:"divider"},null,-1),Y={id:"pfProperties"},q=d("p",null,"Animation type:   ",-1),G=T(" Spiral "),H=T(" Julia set "),K={id:"lbmProperties"},Q=d("p",null,"Animation type:   ",-1),W=T(" Poiseuille Flow "),Z=T(" Custom Touch Move "),ee={class:"tips"},te=T(" Tips: "),le=d("div",{class:"divider"},null,-1),ae={class:"col"},ie=d("div",{class:"col_item0"}," Fluid viscosity: ",-1),ne=d("div",{class:"col_item1"}," 0.005 ",-1),oe={class:"col_item2"},se=d("div",{class:"col_item3"}," 0.20 ",-1),ce=d("div",{class:"divider"},null,-1);F.render=function(e,t,l,a,n,i){const o=y("el-radio"),s=y("el-slider"),r=y("particles-parameter");return m(),c("div",D,[_(o,{modelValue:a.fieldType,"onUpdate:modelValue":t[0]||(t[0]=e=>a.fieldType=e),label:"1"},{default:V((()=>[$])),_:1},8,["modelValue"]),_(o,{modelValue:a.fieldType,"onUpdate:modelValue":t[1]||(t[1]=e=>a.fieldType=e),label:"2"},{default:V((()=>[J])),_:1},8,["modelValue"]),X,d("div",Y,[q,d("div",null,[_(o,{modelValue:a.fieldAnimationType,"onUpdate:modelValue":t[2]||(t[2]=e=>a.fieldAnimationType=e),label:"1"},{default:V((()=>[G])),_:1},8,["modelValue"]),_(o,{modelValue:a.fieldAnimationType,"onUpdate:modelValue":t[3]||(t[3]=e=>a.fieldAnimationType=e),label:"2"},{default:V((()=>[H])),_:1},8,["modelValue"])])]),d("div",K,[Q,d("div",null,[_(o,{modelValue:a.fluidAnimationType,"onUpdate:modelValue":t[4]||(t[4]=e=>a.fluidAnimationType=e),label:"3"},{default:V((()=>[W])),_:1},8,["modelValue"]),_(o,{modelValue:a.fluidAnimationType,"onUpdate:modelValue":t[5]||(t[5]=e=>a.fluidAnimationType=e),label:"4"},{default:V((()=>[Z])),_:1},8,["modelValue"]),d("div",ee,[te,d("ul",null,[(m(!0),c(b,null,w(a.tipsMsgList,(e=>(m(),c("li",{key:e.msg},u(e.msg),1)))),128))])]),d("button",{class:"cornerBt",onClick:t[6]||(t[6]=(...e)=>i.onReset&&i.onReset(...e))},u(a.cleanBtTitle),1),le]),d("div",ae,[ie,ne,d("div",oe,[_(s,{modelValue:a.fluidViscosity,"onUpdate:modelValue":t[7]||(t[7]=e=>a.fluidViscosity=e),min:.005,max:.23,step:.005,label:""},null,8,["modelValue","min","max","step"])]),se])]),ce,_(r)])};const de=n({setup:()=>({singleClick:e=>{let t=e.offsetX,l=e.offsetY;console.log("click P: "+t+", "+l)}})});de.render=function(e,t,l,a,n,i){return m(),c("div",{id:"canvas_container",onClick:t[0]||(t[0]=(...t)=>e.singleClick&&e.singleClick(...t))})};const re={components:{setting:F,CanvasContainer:de}},ue={id:"col_container"},me={id:"mail_col"},pe={id:"right_col"};re.render=function(e,t,l,a,n,i){const o=y("canvas-container"),s=y("setting");return m(),c("div",ue,[d("div",me,[_(o)]),d("div",pe,[_(s)])])};const ve=E(re);ve.use(B),ve.use(C),ve.mount("#app"),window.dispatchEventByName=function(e){let t=document.getElementById("canvas_container");if(null==t)return;const l=new Event(e);t.dispatchEvent(l)};var fe=!0;window.canvas_resize_completed=function(){fe=!0},window.dispatch_resize_event=function(){fe=!1;let e=document.getElementById("canvas_container");null!=e&&e.dispatchEvent(new Event("canvas_size_need_change"))};let ye=window.devicePixelRatio||1;var _e,he=0,ge=0;window.change_canvas_size=function(){let e=document.getElementById("canvas_container");if(null==e)return;let t=e.getBoundingClientRect(),l=e.childNodes[0];t.width!=he&&(l.style.width=t.width+"px",l.width=t.width*ye,he=t.width),t.height!=ge&&(l.style.height=t.height+"px",l.height=t.height*ye,ge=t.height)},window.onresize=function e(){clearTimeout(_e),fe?_e=setTimeout(dispatch_resize_event,800):(console.log("user event: can_resize_canvas--false"),_e=setTimeout(e,800))};