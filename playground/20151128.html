<!doctype html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
  <meta name="author" content="李金磊">
  <script type='text/javascript' src='../javascripts/gren.js'></script>
<style media="screen">

  section {
    padding: 5% 3%;
  }

  p {
    font-size: 18px;
  }
</style>
</head>

<body>
  <section id="container" style="width:94%; height:90%; background-color:#999999;position:fixed; left:0px; top:0px;">

    <p>
      类似 iOS UIMenuController 的上下文菜单
    </p>
    <p style="color:gray;">
      点击屏幕任意位置可显示或隐藏菜单
    </p>

  <p class="" style="color:#ee4545;font-size:14px;">
    <span>被点击的菜单项：</span>
    <span id="result"></span>
  </p>

<p>&nbsp;</p>

<p><b>调用代码：两行</b></p>
  <pre id="pre" class="prettyprint" style="font-size:10px;background-color:#252525; padding:5px; color:#ffffff">
GLPopMenu.instance
.setMenuItems([{'text':'menu0', 'callback': digest}
,...]);

GLPopMenu.instance
.ifNeedsDisplay(parentElement, position);
  </pre>
</section>

<script type="text/javascript">
var result = document.getElementById("result");

function copyed() {
  result.innerText = '你选中的是【复制】';
}

function digest() {
  result.innerText = '你选中的是【书摘】';
}

function note() {
  result.innerText = '你选中的是【笔记】';
}

function shared() {
  result.innerText = '你选中的是【分享】';
}

var menu =  GLPopMenu.instance;

menu.setMenuItems([{'text':'复制', 'callback': copyed},
{'text':'书摘', 'callback': digest},
{'text':'笔记', 'callback': note},
{'text':'分享到哪啊', 'callback': shared}]);

function screenTapped(e) {
  console.log(e.clientX);
  menu.ifNeedsDisplay(new GLPoint(e.clientX, e.clientY));
}
var container = document.getElementById('container');
container.addEventListener("mouseup", screenTapped, false);
</script>


</body>
</html>
