!function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function i(e,t){"soundwave"===e&&(a=new n.WaveCalculater(t))}var n=r(1);importScripts("gren.js");var a=null;onmessage=function(e){if(null===a)i(e.data.effectType,e.data.params),postMessage(a.getPreparationData());else{var t=a.next();postMessage(t)}}},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WaveCalculater=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=r(2);t.WaveCalculater=function(e){function t(e){i(this,t);var r=n(this,Object.getPrototypeOf(t).call(this));return r.positionY=e.positionY,r.drawWidth=e.drawWidth,r.devicePixelRatio=e.devicePixelRatio,r.padding=10,r.vertexVectors=[],r.vertices=[],r.indices=[],r.amplitudes=[],r.waveLengthArr=[],r.startAngle=0,r._generateVerticesData(),r}return a(t,e),o(t,[{key:"_generateVerticesData",value:function(){for(var e=2,t=0,r=60,i=5,n=0,a=new GREN.GLBezier,o=Math.sqrt(r*r+i*i),s=a.generateCoords([[0,0],[r,0],[r,i]],o,1),c=[],u=0;u<s.length;u++)c.push(s[u].coords[1]);for(var h=this.positionY,l=1.5*this.devicePixelRatio,d=0,f=this.drawWidth/2,p=Math.floor(this.drawWidth/2),v=this.drawWidth/6,g=(p-v)/f,w=35*this.devicePixelRatio,y=this.drawWidth/e,x=Math.PI/(y-this.padding-r),b=0;b<=this.drawWidth;b+=e){var m=new GREN.Vector2(b-l,h-l),P=new GREN.Vector2(b-l,h+l),W=new GREN.Vector2(b+l,h-l),V=new GREN.Vector2(b+l,h+l);this.vertexVectors=this.vertexVectors.concat([m,P,V,W]),this.indices=this.indices.concat([d,d+1,d+2,d,d+2,d+3]),d+=4;var M=2*this.padding;if(b>=this.padding&&b<=this.drawWidth-this.padding){b<this.padding+r?(n+=2,this.amplitudes.push(c[n-1])):b>this.drawWidth-this.padding-r?(this.amplitudes.push(c[n-1]),n-=2):(t+=x,this.amplitudes.push(i+Math.sin(t)*w));var O=f>b?b:this.drawWidth-b;M=v+g*O}else this.amplitudes.push(0);this.waveLengthArr.push(M)}}},{key:"generateWave",value:function(){this.vertices=[];var e=void 0,t=void 0,r=void 0,i=void 0,n=this.startAngle,a=Math.PI/200;this.startAngle+=8*a;for(var o=0;o<this.amplitudes.length;o++){var s=4*o;e=this.vertexVectors[s],t=this.vertexVectors[s+1],r=this.vertexVectors[s+2],i=this.vertexVectors[s+3];var c=Math.sin(n)*this.amplitudes[o];n-=2*Math.PI/this.waveLengthArr[o],this.vertices=this.vertices.concat([e.x,e.y+c,t.x,t.y+c,i.x,i.y+c,r.x,i.y+c])}}},{key:"getPreparationData",value:function(){return this.indices}},{key:"next",value:function(){return this.generateWave(),this.vertices}}]),t}(s.IWorkerCalculater)},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();t.IWorkerCalculater=function(){function e(t){r(this,e)}return i(e,[{key:"getPreparationData",value:function(){}},{key:"next",value:function(){}}]),e}()}]);