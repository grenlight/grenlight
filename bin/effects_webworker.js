!function(e){function t(i){if(r[i])return r[i].exports;var a=r[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function i(e,t){"soundwave"===e&&(n=new a.WaveCalculater(t))}var a=r(1);importScripts("gren.js");var n=null;onmessage=function(e){if(null===n)i(e.data.effectType,e.data.params),postMessage(n.getPreparationData());else{var t=n.next();postMessage(t.buffer,[t.buffer])}}},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WaveCalculater=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=r(2);t.WaveCalculater=function(e){function t(e){i(this,t);var r=a(this,Object.getPrototypeOf(t).call(this));return r.positionY=e.positionY,r.drawWidth=e.drawWidth,r.devicePixelRatio=e.devicePixelRatio,r.padding=10,r.vertexVectors=[],r.indices=[],r.amplitudes=[],r.waveLengthArr=[],r.startAngle=0,r._generateVerticesData(),r}return n(t,e),o(t,[{key:"_generateVerticesData",value:function(){for(var e=2,t=0,r=60,i=5,a=0,n=new GREN.GLBezier,o=Math.sqrt(r*r+i*i),s=n.generateCoords([[0,0],[r,0],[r,i]],o,1),u=[],c=0;c<s.length;c++)u.push(s[c].coords[1]);for(var h=this.positionY,l=1.5*this.devicePixelRatio,d=this.drawWidth/2,f=Math.floor(this.drawWidth/2),p=this.drawWidth/6,v=(f-p)/d,y=35*this.devicePixelRatio,g=this.drawWidth/e,w=Math.PI/(g-this.padding-r),x=0,b=0;b<=this.drawWidth;b+=e){var m=new GREN.Vector2(b,h-l),P=new GREN.Vector2(b,h+l);this.vertexVectors=this.vertexVectors.concat([m,P]),b>0&&(this.indices=this.indices.concat([x,x+1,x+2,x,x+2,x+3]),x+=2);var W=2*this.padding;if(b>=this.padding&&b<=this.drawWidth-this.padding){b<this.padding+r?(a+=2,this.amplitudes.push(u[a-1])):b>this.drawWidth-this.padding-r?(this.amplitudes.push(u[a-1]),a-=2):(t+=w,this.amplitudes.push(i+Math.sin(t)*y));var A=d>b?b:this.drawWidth-b;W=p+v*A}else this.amplitudes.push(0);this.waveLengthArr.push(W)}}},{key:"generateWave",value:function(){this.vertexArray=new Float32Array(8*this.amplitudes.length);var e=void 0,t=void 0,r=this.startAngle,i=Math.PI/200;this.startAngle+=8*i;for(var a=0;a<this.amplitudes.length;a++){var n=2*a;e=this.vertexVectors[n],t=this.vertexVectors[n+1];var o=Math.sin(r)*this.amplitudes[a];r-=2*Math.PI/this.waveLengthArr[a];var s=4*a;this.vertexArray[s]=e.x,this.vertexArray[s+1]=e.y+o,this.vertexArray[s+2]=t.x,this.vertexArray[s+3]=t.y+o}}},{key:"getPreparationData",value:function(){return this.indices}},{key:"next",value:function(){return this.generateWave(),this.vertexArray}}]),t}(s.IWorkerCalculater)},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();t.IWorkerCalculater=function(){function e(t){r(this,e)}return i(e,[{key:"getPreparationData",value:function(){}},{key:"next",value:function(){}}]),e}()}]);