!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("GREN")):"function"==typeof define&&define.amd?define("FILTER",["GREN"],t):"object"==typeof exports?exports.FILTER=t(require("GREN")):e.FILTER=t(e.GREN)}(this,function(e){return function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1);Object.keys(i).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})})},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s="\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform sampler2D texture;\n\nvarying vec2 texCoord;\n\nvoid main(void) {\n    gl_FragColor = texture2D(texture, texCoord);\n}\n",o=r(2);t.FilterTest=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?300:arguments[0],r=this,n=arguments.length<=1||void 0===arguments[1]?100:arguments[1],a=arguments[2];if(i(this,e),this.renderer=new o.WebGLRenderer,this.renderer.setStyle(t,n,"margin:0px; position:absolute; z-index:1;"),this.gl=this.renderer.gl,this.domElement=this.renderer.canvas,this.renderer.isWebGLSuported!==!1){t*=window.devicePixelRatio,n*=window.devicePixelRatio,this.pMatrix=o.Matrix4.orthogonal(0,this.renderer.canvasWidth,0,this.renderer.canvasHeight,-5e3,5e3);var h=[0,n,0,0,0,0,t,n,0,t,0,0];this.vertexBuffer=this.gl.createArrayBufferWithData(h);var u=[0,0,0,1,1,0,1,1];this.textureVertexBuffer=this.gl.createArrayBufferWithData(u);var l=[0,1,2,1,2,3];this.indexBuffer=this.gl.createElementBufferWithData(l),this.texture2D=new o.GLTexture2D(this.gl,a,function(){var e=(new o.BoxBlurFilter,new o.LuminanceFilter,new o.GaussianBlurFilter(10,5));r.texture2D.filterWithOperation(e),r.updateShader(o.basicFilterVS,s)})}}return n(e,[{key:"updateShader",value:function(e,t){this.initProgram(e,t),this.draw()}},{key:"initProgram",value:function(e,t){this.prg=this.gl.makeProgram(e,t),this.prg.setAttribLocations(["vertexPosition","vTextureCoord"]),this.prg.setUniformLocations(["pMatrix","mvMatrix","texture","textureWidth","textureHeight"]),this.gl.uniformMatrix4fv(this.prg.pMatrix,!1,this.pMatrix),this.gl.uniformMatrix4fv(this.prg.mvMatrix,!1,new o.Matrix4),this.gl.uniform1f(this.prg.textureWidth,this.texture2D.texWidth),this.gl.uniform1f(this.prg.textureHeight,this.texture2D.texHeight),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture2D.texture),this.gl.uniform1i(this.prg.texture,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.vertexAttribPointer(this.prg.vertexPosition,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.prg.vertexPosition),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.textureVertexBuffer),this.gl.vertexAttribPointer(this.prg.vTextureCoord,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.prg.vTextureCoord)}},{key:"draw",value:function(){this.gl.viewport(0,0,this.renderer.canvasWidth,this.renderer.canvasHeight),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}}]),e}()},function(t,r){t.exports=e}])});