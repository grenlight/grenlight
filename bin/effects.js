!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("GREN")):"function"==typeof define&&define.amd?define("EFFECT",["GREN"],t):"object"==typeof exports?exports.EFFECT=t(require("GREN")):e.EFFECT=t(e.GREN)}(this,function(e){return function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1);Object.keys(i).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var n=r(4);Object.keys(n).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var a=r(5);Object.keys(a).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})})},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PSSoundWave=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=function h(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:h(n,t,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=r(2),c=r(3);t.PSSoundWave=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?300:arguments[0],r=arguments.length<=1||void 0===arguments[1]?100:arguments[1],a=arguments[2];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this));if(o.renderer=new c.WebGLRenderer,o.renderer.setStyle(e,r,"margin:0px; position:absolute; z-index:1;"),o.gl=o.renderer.gl,o.domElement=o.renderer.canvas,o.renderer.isWebGLSuported===!1)return n(o);o.colors=[[1,1,1,1],[1,1,1,.4],[1,1,1,.3],[1,1,1,.2],[1,1,1,.1]],o.mvMatrixList=[];var s=o.renderer.canvasHeight/4,h=c.Matrix4.identity();c.Matrix4.translate(h,[0,s,0]),o.mvMatrixList.push(h);var u=c.Matrix4.identity();c.Matrix4.translate(u,[0,s,0]),c.Matrix4.scale(u,[1,.9,1]),o.mvMatrixList.push(u);var v=c.Matrix4.identity();c.Matrix4.translate(v,[0,s,0]),c.Matrix4.scale(v,[1,.7,1]),o.mvMatrixList.push(v);var g=c.Matrix4.identity();c.Matrix4.translate(g,[0,s,0]),c.Matrix4.scale(g,[1,.3,1]),o.mvMatrixList.push(g);var f=c.Matrix4.identity();return c.Matrix4.translate(f,[0,s,0]),c.Matrix4.scale(f,[1,.5,1]),c.Matrix4.rotate(f,f,Math.PI,[0,0,1]),o.mvMatrixList.push(f),o.pMatrix=c.Matrix4.orthogonal(0,o.renderer.canvasWidth,0,o.renderer.canvasHeight,-5e3,5e3),o._initProgram(),o.wave=new l.Wave(o.gl,o.prg,o.renderer.canvasWidth,0,a,function(){o.startAnimating()}),o}return a(t,e),o(t,[{key:"_interactVertice",value:function(){this.vertices=[];for(var e=void 0,t=void 0,r=void 0,i=void 0,n=0;n<this.amplitudes.length;n++){var a=this.amplitudes[n],o=4*n;e=this.vertexVectors[o],t=this.vertexVectors[o+1],r=this.vertexVectors[o+2],i=this.vertexVectors[o+3],this.vertices=this.vertices.concat([e.x,e.y+a,t.x,t.y+a,i.x,i.y+a,r.x,i.y+a])}}},{key:"_initProgram",value:function(){this.prg=this.gl.makeProgram(c.commonVS,c.commonFS),this.prg&&(this.prg.setAttribLocations(["vertexPosition"]),this.prg.setUniformLocations(["pMatrix","mvMatrix","color"]),this.gl.uniformMatrix4fv(this.prg.pMatrix,!1,this.pMatrix))}},{key:"enterFrame",value:function(){s(Object.getPrototypeOf(t.prototype),"enterFrame",this).call(this),this.gl.clearColor(0,0,0,0),this.gl.viewport(0,0,this.renderer.canvasWidth,this.renderer.canvasHeight),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.wave.generateAWave(),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);for(var e=this.mvMatrixList.length-1;e>=0;e--)this.gl.uniform4fv(this.prg.color,this.colors[e]),this.gl.uniformMatrix4fv(this.prg.mvMatrix,!1,this.mvMatrixList[e]),this.wave.draw()}}]),t}(c.IAnimation)},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();r(3),t.Wave=function(){function e(t,r,n,a,o,s){i(this,e),this.gl=t,this.prg=r,this.callBack=s,this.indices=[],this.indicesLength=0,this.worker=new Worker(o),console.log(this.worker),this.worker.onmessage=this.handleMessage.bind(this),this.worker.postMessage({effectType:"soundwave",params:{drawWidth:n,positionY:a,devicePixelRatio:window.devicePixelRatio}})}return n(e,[{key:"handleMessage",value:function(e){if(0===this.indicesLength){this.indicesLength=e.data.length;var t=this.gl.createElementBufferWithData(e.data);this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this.generateAWave()}else{var r=this.gl.createArrayBufferWithTypedArray(e.data);this.gl.enableVertexAttribArray(this.prg.vertexPosition),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),this.gl.vertexAttribPointer(this.prg.vertexPosition,2,this.gl.FLOAT,!1,0,0),this.callBack&&(this.callBack(),this.callBack=null)}}},{key:"generateAWave",value:function(){this.worker.postMessage(null)}},{key:"draw",value:function(){this.gl.drawElements(this.gl.TRIANGLE_STRIP,this.indicesLength,this.gl.UNSIGNED_SHORT,0)}}]),e}()},function(t,r){t.exports=e},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),a="\nattribute vec3 vertexPosition;\nattribute vec2 texCoords;\n\nuniform mat4 mvMatrix;\nuniform mat4 pMatrix;\n\nvarying   vec2 pixel;\n\nvoid main(void) {\n  gl_Position = pMatrix * mvMatrix * vec4(vertexPosition, 1.0);\n   pixel = texCoords;\n}",o=t.pixelFS="\nprecision highp float;\nuniform sampler2D texture;\nuniform vec2 mouse;\n\nvarying vec2 pixel;\n\n  bool is_onscreen(vec2 uv){\n    return (uv.x < 1.) && (uv.x > 0.) && (uv.y < 1.) && (uv.y > 0.);\n  }\n\n  void main(void) {\n    vec2 c = vec2(-0.25, 0.0) + (mouse.yx-0.5)*vec2(0.2,-0.55);\n    vec2 tuning =  vec2(1.8) - (mouse.y-0.5)*0.3;\n    vec2 complexSquaredPlusC; // One steps towards the Julia Attractor\n    vec2 uv = (pixel - vec2(0.5))*tuning;\n    complexSquaredPlusC.x = (uv.x * uv.x - uv.y * uv.y + c.x + 0.5);\n    complexSquaredPlusC.y = (2. * uv.x * uv.y + c.y + 0.5);\n    \n    if(is_onscreen(complexSquaredPlusC)){\n      vec4 old = texture2D(texture, complexSquaredPlusC);\n      gl_FragColor = old + vec4( .004, .008, .012, 1.); // increment to white\n      // gl_FragColor = vec4(1., 1., 1., 1.);\n    }else{\n      // return border color\n      gl_FragColor = vec4(0., 0., 0., 1.); // out is black\n    }\n    gl_FragColor.a = 1.;\n    \n    // gl_FragColor = texture2D(texture, pixel);\n  }",s=r(3);t.JuliaFractal=function(){function e(){var t=this,r=arguments.length<=0||void 0===arguments[0]?300:arguments[0],n=arguments.length<=1||void 0===arguments[1]?100:arguments[1];if(i(this,e),this.renderer=new s.WebGLRenderer,this.renderer.setStyle(r,n,"margin:0px; position:absolute; z-index:1;"),this.gl=this.renderer.gl,this.domElement=this.renderer.canvas,this.renderer.isWebGLSuported!==!1){this.vertices=[-.5,-.5,0,-.5,.5,0,.5,.5,0,.5,-.5,0],this.indices=[1,0,2,3],this.vertexBuffer=this.gl.createArrayBufferWithData(this.vertices),this.texCoordsBuffer=this.gl.createArrayBufferWithData([0,0,0,1,1,1,1,0]),this.indexBuffer=this.gl.createElementBufferWithData(this.indices),this.mvMatrix=s.Matrix4.identity(),s.Matrix4.scale(this.mvMatrix,[this.renderer.canvasWidth,this.renderer.canvasHeight,0]),this.pMatrix=s.Matrix4.orthogonal(-this.renderer.canvasWidth/2,this.renderer.canvasWidth/2,-this.renderer.canvasHeight/2,this.renderer.canvasHeight/2,-5e3,5e3),this._initProgram();var a="../bin/texture.png";s.createImageByURL(a,function(e){var r=t.gl.createTextureWithData(e,!1);t.gl.activeTexture(t.gl.TEXTURE0),t.gl.bindTexture(t.gl.TEXTURE_2D,r),t.gl.uniform1i(t.prg.texture,0),t.gl.enableVertexAttribArray(t.prg.texCoords),t.gl.bindBuffer(t.gl.ARRAY_BUFFER,t.texCoordsBuffer),t.gl.vertexAttribPointer(t.prg.texCoords,2,t.gl.FLOAT,!1,0,0),s.TouchManager.addTouchListener(t.domElement,t.touchStartHandler.bind(t),t.touchMoveHandler.bind(t)),t.draw()})}}return n(e,[{key:"_initProgram",value:function(){this.prg=this.gl.makeProgram(a,o),this.prg&&(this.prg.setAttribLocations(["vertexPosition","texCoords"]),this.prg.setUniformLocations(["pMatrix","mvMatrix","texture","mouse"]),this.gl.uniformMatrix4fv(this.prg.mvMatrix,!1,this.mvMatrix),this.gl.uniformMatrix4fv(this.prg.pMatrix,!1,this.pMatrix),this.gl.uniform2fv(this.prg.mouse,[.5,.5]))}},{key:"draw",value:function(){this.gl.clearColor(.25,.25,.25,1),this.gl.viewport(0,0,this.renderer.canvasWidth,this.renderer.canvasHeight),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.enableVertexAttribArray(this.prg.vertexPosition),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.vertexAttribPointer(this.prg.vertexPosition,3,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.gl.drawElements(this.gl.TRIANGLE_STRIP,this.indices.length,this.gl.UNSIGNED_SHORT,0)}},{key:"touchStartHandler",value:function(e){}},{key:"touchMoveHandler",value:function(e){var t=e.pageX?e.pageX:e.changedTouches[0].pageX,r=e.pageY?e.pageY:e.changedTouches[0].pageY;t-=this.domElement.offsetLeft,r-=this.domElement.offsetTop,t/=this.renderer.canvasWidth/window.devicePixelRatio,r/=this.renderer.canvasHeight/window.devicePixelRatio,this.gl.uniform2fv(this.prg.mouse,[t,r]),this.draw()}}]),e}()},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s="\nattribute vec2 vertexPosition;\n\nuniform mat4 mvMatrix;\nuniform mat4 pMatrix;\n\nvarying   vec2 pixel;\n\nvoid main(void) {\n  gl_Position = pMatrix * mvMatrix * vec4(vertexPosition, 0.0, 1.0);\n   pixel = vertexPosition;\n}",l="\nprecision highp float;\n\nuniform vec2 screen;\nvarying vec2 pixel;\n\nconst int maxRepeats = 30;\nconst vec2 topRight = vec2(1, -1);\nconst vec2 bottomLeft = vec2(-2, 1);\nfloat drow = (topRight.y - bottomLeft.y);\nfloat dcol = (topRight.x - bottomLeft.x);\n\nvec2 multiply(vec2 a, vec2 b) {\n	return vec2(a.x*b.x - a.y*b.y,  a.y*b.x + a.x*b.y);\n}\nvoid main(void) {\n    vec2 Z = vec2(0, 0);\n    vec2 p = vec2(bottomLeft.x + (pixel.x+0.5)*dcol, bottomLeft.y + (pixel.y+0.5)*drow);\n\n    int stepper = 0;\n    for (int i=0; i<maxRepeats; i++) {\n        if (abs(dot(Z, Z)) > 4.0) {\n            break;\n        }\n        Z = multiply(Z, Z) + p;\n        stepper += 1;\n    }\n    if (stepper == maxRepeats) {\n        //float c =  mod(float(stepper), 255.0);\n        gl_FragColor = vec4(Z.x, Z.y,  0.5, 1.);\n       // gl_FragColor = vec4(0., 0., 0., 1.);\n    } else {\n        gl_FragColor = vec4(0., 0., 0., 1.);\n    }\n    \n  }",c=r(3);t.MandelbrotSet=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?300:arguments[0],r=arguments.length<=1||void 0===arguments[1]?100:arguments[1];i(this,t);var a=n(this,Object.getPrototypeOf(t).call(this));return a.renderer=new c.WebGLRenderer,a.renderer.setStyle(e,r,"margin:0px; position:absolute; z-index:1;"),a.gl=a.renderer.gl,a.domElement=a.renderer.canvas,a.renderer.isWebGLSuported===!1?n(a):(a.vertices=[-.5,-.5,-.5,.5,.5,.5,.5,-.5],a.indices=[1,0,2,3],a.indexBuffer=a.gl.createElementBufferWithData(a.indices),a.scale=1,a.mvMatrix=c.Matrix4.identity(),c.Matrix4.scale(a.mvMatrix,[a.renderer.canvasWidth,a.renderer.canvasHeight,1]),a.pMatrix=c.Matrix4.orthogonal(-a.renderer.canvasWidth/2,a.renderer.canvasWidth/2,-a.renderer.canvasHeight/2,a.renderer.canvasHeight/2,-5e3,5e3),a._initProgram(),a.startAnimating(),a)}return a(t,e),o(t,[{key:"_initProgram",value:function(){this.prg=this.gl.makeProgram(s,l),this.prg&&(this.prg.setAttribLocations(["vertexPosition"]),this.prg.setUniformLocations(["pMatrix","mvMatrix","screen"]),this.gl.uniformMatrix4fv(this.prg.pMatrix,!1,this.pMatrix),this.gl.uniform2fv(this.prg.screen,[this.renderer.canvasWidth,this.renderer.canvasHeight]))}},{key:"enterFrame",value:function(){this.gl.clearColor(.25,.25,.25,1),this.gl.viewport(0,0,this.renderer.canvasWidth,this.renderer.canvasHeight),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);var e=c.Matrix4.copy(this.mvMatrix);c.Matrix4.scale(e,[this.scale,this.scale,1]),this.gl.uniformMatrix4fv(this.prg.mvMatrix,!1,e);for(var t=new Float32Array(this.vertices.length),r=0;r<this.vertices.length;r++)t[r]=this.vertices[r]/this.scale;var i=this.gl.createArrayBufferWithTypedArray(t);this.scale+=.01,this.gl.enableVertexAttribArray(this.prg.vertexPosition),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(this.prg.vertexPosition,2,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.gl.drawElements(this.gl.TRIANGLE_STRIP,this.indices.length,this.gl.UNSIGNED_SHORT,0)}}]),t}(c.IAnimation)}])});