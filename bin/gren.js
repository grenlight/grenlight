!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("GREN",[],t):"object"==typeof exports?exports.GREN=t():e.GREN=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);Object.defineProperty(t,"WebGLRenderer",{enumerable:!0,get:function(){return r.WebGLRenderer}});var i=n(4);Object.defineProperty(t,"commonVS",{enumerable:!0,get:function(){return i.commonVS}}),Object.defineProperty(t,"commonFS",{enumerable:!0,get:function(){return i.commonFS}});var a=n(5);Object.defineProperty(t,"GLBezier",{enumerable:!0,get:function(){return a.GLBezier}});var o=n(6);Object.defineProperty(t,"Matrix4",{enumerable:!0,get:function(){return o.Matrix4}});var u=n(7);Object.defineProperty(t,"Matrix2d",{enumerable:!0,get:function(){return u.Matrix2d}});var c=n(8);Object.defineProperty(t,"Vector2",{enumerable:!0,get:function(){return c.Vector2}});var s=n(9);Object.defineProperty(t,"Vector3",{enumerable:!0,get:function(){return s.Vector3}});var l=n(10);Object.defineProperty(t,"Vector4",{enumerable:!0,get:function(){return l.Vector4}});var f=n(11);Object.defineProperty(t,"IAnimation",{enumerable:!0,get:function(){return f.IAnimation}});var h=n(12);Object.defineProperty(t,"TouchManager",{enumerable:!0,get:function(){return h.TouchManager}});var v=n(2);Object.keys(v).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}})});try{window.devicePixelRatio=window.devicePixelRatio||1}catch(d){}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLRenderer=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),u=r(o),c=n(3),s=["webgl","experimental-webgl","webkit-3d","moz-webgl"];t.WebGLRenderer=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],n=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];i(this,e),this.canvasWidth=0,this.canvasHeight=0,this.canvas=null,null!==r?this.canvas=document.getElementById(r):this.canvas=document.createElement("canvas"),this.gl=this.getGLContext(),null===this.gl?this.isWebGLSuported=!1:(this.isWebGLSuported=!0,this.gl.createArrayBufferWithData=u.createArrayBufferWithData,this.gl.createArrayBufferWithDataAndType=u.createArrayBufferWithDataAndType,this.gl.createArrayBufferWithTypedArray=u.createArrayBufferWithTypedArray,this.gl.createElementBufferWithData=u.createElementBufferWithData,this.gl.createTextureWithData=u.createTextureWithData,this.gl.makeProgram=u.makeProgram),this.setStyle(t,n)}return a(e,[{key:"setStyle",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];null!=this.canvas&&0!==e&&0!==t&&(this.canvasWidth=e*window.devicePixelRatio,this.canvasHeight=t*window.devicePixelRatio,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,null===n?(this.canvas.style.width=e+"px",this.canvas.style.height=t+"px"):this.canvas.setAttribute("style","width:"+e+"px; height: "+t+"px; "+n+";"),this.canvas.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)",this.centerX=this.canvasWidth/2,this.centerY=this.canvasHeight/2)}},{key:"getGLContext",value:function(){var e=null;if(c.Security.validDomain()===!1)return e;for(var t=0;t<s.length&&!(e=this.canvas.getContext(s[t],{antialias:!0}));++t);return null===e&&this._createNotSupportMessageView(),e}},{key:"_createNotSupportMessageView",value:function(){this.canvas=document.createElement("div"),this.canvas.setAttribute("style","color: #454545; padding: 25px; font-size: 18px;"),this.canvas.innerHTML="<p>您当前使用的浏览器不支持 WebGL.</p>\n<p>支持 WebGL 的手机系统版本及浏览器版本有: </p>\n<ul>\n<li>iOS 8.0, Android 5.0 及以上版本</li>\n<li>IE 11 及微软 Edge 浏览所有版本</li>\n<li>FireFox for PC/Mac 40 及以上版本</li>\n<li>Chrome for PC/Mac 43 及以上版本</li>\n<li>Safari for Mac 8.0 及以上版本</li>\n</ul>"}}]),e}()},function(e,t){"use strict";function n(e,t){function n(e,t){var n=i.createShader(e);if(i.shaderSource(n,t),i.compileShader(n),!i.getShaderParameter(n,i.COMPILE_STATUS))throw new Error("compile error: "+i.getShaderInfoLog(n));return n}var r=this,i=this,a=this.createProgram();if(this.attachShader(a,n(this.VERTEX_SHADER,e)),this.attachShader(a,n(this.FRAGMENT_SHADER,t)),this.linkProgram(a),!this.getProgramParameter(a,this.LINK_STATUS))throw new Error("link error: "+this.getProgramInfoLog(a));return this.useProgram(a),a.setAttribLocations=function(e){for(var t=0,n=e.length;n>t;t+=1)a[e[t]]=r.getAttribLocation(a,e[t])},a.setUniformLocations=function(e){for(var t=0,n=e.length;n>t;t+=1)a[e[t]]=r.getUniformLocation(a,e[t])},a}function r(e){return this.createArrayBufferWithDataAndType(e,this.STREAM_DRAW)}function i(e,t){var n=this.createBuffer();return this.bindBuffer(this.ARRAY_BUFFER,n),this.bufferData(this.ARRAY_BUFFER,new Float32Array(e),t),this.bindBuffer(this.ARRAY_BUFFER,null),n}function a(e){var t=arguments.length<=1||void 0===arguments[1]?this.STATIC_DRAW:arguments[1],n=this.createBuffer();return this.bindBuffer(this.ARRAY_BUFFER,n),this.bufferData(this.ARRAY_BUFFER,e,t),this.bindBuffer(this.ARRAY_BUFFER,null),n}function o(e){var t=this.createBuffer();return this.bindBuffer(this.ELEMENT_ARRAY_BUFFER,t),this.bufferData(this.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),this.STATIC_DRAW),this.bindBuffer(this.ELEMENT_ARRAY_BUFFER,null),t}function u(e){return 0===(e&e-1)}function c(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];this.pixelStorei(this.UNPACK_FLIP_Y_WEBGL,!0);var n=this.createTexture();return this.bindTexture(this.TEXTURE_2D,n),this.texImage2D(this.TEXTURE_2D,0,this.RGBA,this.RGBA,this.UNSIGNED_BYTE,e),u(e.width)&&u(e.height)?(this.generateMipmap(this.TEXTURE_2D),t&&(this.texParameteri(this.TEXTURE_2D,this.TEXTURE_WRAP_S,this.REPEAT),this.texParameteri(this.TEXTURE_2D,this.TEXTURE_WRAP_T,this.REPEAT))):(this.texParameteri(this.TEXTURE_2D,this.TEXTURE_WRAP_S,this.CLAMP_TO_EDGE),this.texParameteri(this.TEXTURE_2D,this.TEXTURE_WRAP_T,this.CLAMP_TO_EDGE),this.texParameteri(this.TEXTURE_2D,this.TEXTURE_MIN_FILTER,this.LINEAR),this.texParameteri(this.TEXTURE_2D,this.TEXTURE_MAG_FILTER,this.LINEAR)),this.bindTexture(this.TEXTURE_2D,null),n}function s(e,t){var n=new Image;n.onload=function(){t&&t(n)},n.src=e}Object.defineProperty(t,"__esModule",{value:!0}),t.makeProgram=n,t.createArrayBufferWithData=r,t.createArrayBufferWithDataAndType=i,t.createArrayBufferWithTypedArray=a,t.createElementBufferWithData=o,t.isPowerOf2=u,t.createTextureWithData=c,t.createImageByURL=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=["l","i","j","i","n","l","e","i"],a=["l","o","c","a","l","h","o","s","t"];t.Security=function(){function e(){n(this,e)}return r(e,null,[{key:"validDomain",value:function(){var e=i.join(""),t=a.join(""),n=window.location.hostname.split("."),r=n[0];return 3===n.length&&(r=n[1]),r===decodeURI(e)||r===decodeURI(t)}}]),e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.commonVS="\nattribute vec3 vertexPosition;\n\nuniform mat4 mvMatrix;\nuniform mat4 pMatrix;\n\nvoid main(void) {\n  gl_Position = pMatrix * mvMatrix * vec4(vertexPosition, 1.0);\n}\n",t.commonFS="\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform vec4 color;\n\nvoid main(void) {\n  gl_FragColor = color;\n}\n"},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.GLBezier=function(){function e(){n(this,e)}return r(e,[{key:"generateCoords",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?.5:arguments[2],i=t[0],a=t[t.length-1];0===n&&(n=e.getDistance(i,a));var o=Math.floor(n*r);if(1>=o){var u=i[0]-a[0],c=i[1]-a[1];return[{coords:a,slope:Math.atan2(c,u),distance:Math.sqrt(u*u+c*c)}]}this.stepLength=1/o;for(var s=[],l=this.calculateControlEdge(t),f=t[0],h=0;o>h;h++){var v=this.calculateReferenceLine(t,l,h+1),d=v[1][0]-v[0][0],y=v[1][1]-v[0][1],m=v[0][0]+d*((h+1)*this.stepLength),g=v[0][1]+y*((h+1)*this.stepLength),p=m-f[0],E=g-f[1];f=[m,g],s.push({coords:[m,g],slope:Math.atan2(E,p),distance:Math.sqrt(p*p+E*E)})}return s}},{key:"calculateReferenceLine",value:function(e,t,n){for(var r=[],i=0;i<e.length-1;i++){var a=e[i][0]+t[i].deltaX*n,o=e[i][1]+t[i].deltaY*n;r.push([a,o])}if(2===r.length)return r;var u=this.calculateControlEdge(r);return this.calculateReferenceLine(r,u,n)}},{key:"calculateControlEdge",value:function(e){for(var t=[],n=1;n<e.length;n++){var r=e[n][0]-e[n-1][0],i=e[n][1]-e[n-1][1],a=this.edge();a.length=Math.sqrt(r*r+i*i),a.angleSin=i/a.length,a.angleCos=r/a.length,a.calculateDelta(this.stepLength),t.push(a)}return t}},{key:"edge",value:function(){return{length:0,angleCos:0,angleSin:0,deltaX:0,deltaY:0,calculateDelta:function(e){this.deltaX=e*this.length*this.angleCos,this.deltaY=e*this.length*this.angleSin}}}}],[{key:"getDistance",value:function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Matrix4=function(){function e(){n(this,e),this.identity=e.identity()}return r(e,null,[{key:"identity",value:function(){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},{key:"copy",value:function(t){var n=e.identity();return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}},{key:"perspective",value:function(t,n,r,i){var a=1/Math.tan(t/2),o=1/(r-i),u=e.identity();return u[0]=a/n,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=a,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=(i+r)*o,u[11]=-1,u[12]=0,u[13]=0,u[14]=2*i*r*o,u[15]=0,u}},{key:"orthogonal",value:function(t,n,r,i,a,o){var u=1/(t-n),c=1/(r-i),s=1/(a-o),l=e.identity();return l[0]=-2*u,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*c,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*s,l[11]=0,l[12]=(t+n)*u,l[13]=(i+r)*c,l[14]=(o+a)*s,l[15]=1,l}},{key:"scale",value:function(e,t){var n=t[0],r=t[1],i=t[2];e[0]*=n,e[1]*=n,e[2]*=n,e[3]*=n,e[4]*=r,e[5]*=r,e[6]*=r,e[7]*=r,e[8]*=i,e[9]*=i,e[10]*=i,e[11]*=i}},{key:"translate",value:function(e,t){var n=t[0],r=t[1],i=t[2];return e[12]+=e[0]*n+e[4]*r+e[8]*i,e[13]+=e[1]*n+e[5]*r+e[9]*i,e[14]+=e[2]*n+e[6]*r+e[10]*i,e[15]+=e[3]*n+e[7]*r+e[11]*i,e}},{key:"inverse",value:function(t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=t[6],s=t[7],l=t[8],f=t[9],h=t[10],v=t[11],d=t[12],y=t[13],m=t[14],g=t[15],p=n*u-r*o,E=n*c-i*o,b=n*s-a*o,T=r*c-i*u,_=r*s-a*u,A=i*s-a*c,R=l*y-f*d,P=l*m-h*d,x=l*g-v*d,M=f*m-h*y,w=f*g-v*y,k=h*g-v*m,L=p*k-E*w+b*M+T*x-_*P+A*R;if(!L)return null;L=1/L;var O=e.identity();return O[0]=(u*k-c*w+s*M)*L,O[1]=(i*w-r*k-a*M)*L,O[2]=(y*A-m*_+g*T)*L,O[3]=(h*_-f*A-v*T)*L,O[4]=(c*x-o*k-s*P)*L,O[5]=(n*k-i*x+a*P)*L,O[6]=(m*b-d*A-g*E)*L,O[7]=(l*A-h*b+v*E)*L,O[8]=(o*w-u*x+s*R)*L,O[9]=(r*x-n*w-a*R)*L,O[10]=(d*_-y*b+g*p)*L,O[11]=(f*b-l*_-v*p)*L,O[12]=(u*P-o*M-c*R)*L,O[13]=(n*M-r*P+i*R)*L,O[14]=(y*E-d*T-m*p)*L,O[15]=(l*T-f*E+h*p)*L,O}},{key:"rotate",value:function(e,t,n,r){var i,a,o,u,c,s,l,f,h,v,d,y,m,g,p,E,b,T,_,A,R,P,x,M,w=r[0],k=r[1],L=r[2],O=Math.sqrt(w*w+k*k+L*L);return O=1/O,w*=O,k*=O,L*=O,i=Math.sin(n),a=Math.cos(n),o=1-a,u=t[0],c=t[1],s=t[2],l=t[3],f=t[4],h=t[5],v=t[6],d=t[7],y=t[8],m=t[9],g=t[10],p=t[11],E=w*w*o+a,b=k*w*o+L*i,T=L*w*o-k*i,_=w*k*o-L*i,A=k*k*o+a,R=L*k*o+w*i,P=w*L*o+k*i,x=k*L*o-w*i,M=L*L*o+a,e[0]=u*E+f*b+y*T,e[1]=c*E+h*b+m*T,e[2]=s*E+v*b+g*T,e[3]=l*E+d*b+p*T,e[4]=u*_+f*A+y*R,e[5]=c*_+h*A+m*R,e[6]=s*_+v*A+g*R,e[7]=l*_+d*A+p*R,e[8]=u*P+f*x+y*M,e[9]=c*P+h*x+m*M,e[10]=s*P+v*x+g*M,e[11]=l*P+d*x+p*M,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e}},{key:"multiplyMatrices",value:function(t,n){var r=e.identity(),i=t[0],a=t[4],o=t[8],u=t[12],c=t[1],s=t[5],l=t[9],f=t[13],h=t[2],v=t[6],d=t[10],y=t[14],m=t[3],g=t[7],p=t[11],E=t[15],b=n[0],T=n[4],_=n[8],A=n[12],R=n[1],P=n[5],x=n[9],M=n[13],w=n[2],k=n[6],L=n[10],O=n[14],j=n[3],S=n[7],B=n[11],D=n[15];return r[0]=i*b+a*R+o*w+u*j,r[4]=i*T+a*P+o*k+u*S,r[8]=i*_+a*x+o*L+u*B,r[12]=i*A+a*M+o*O+u*D,r[1]=c*b+s*R+l*w+f*j,r[5]=c*T+s*P+l*k+f*S,r[9]=c*_+s*x+l*L+f*B,r[13]=c*A+s*M+l*O+f*D,r[2]=h*b+v*R+d*w+y*j,r[6]=h*T+v*P+d*k+y*S,r[10]=h*_+v*x+d*L+y*B,r[14]=h*A+v*M+d*O+y*D,r[3]=m*b+g*R+p*w+E*j,r[7]=m*T+g*P+p*k+E*S,r[11]=m*_+g*x+p*L+E*B,r[15]=m*A+g*M+p*O+E*D,r}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Matrix2d=function(){function e(){n(this,e),this.identity=e.identity()}return r(e,null,[{key:"identity",value:function(){return new Float32Array([1,0,0,1,0,0])}},{key:"copy",value:function(t){var n=e.identity();return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}},{key:"scale",value:function(e,t){var n=t[0],r=t[1];e[0]*=n,e[1]*=n,e[2]*=r,e[3]*=r}},{key:"translate",value:function(e,t){var n=t[0],r=t[1];e[4]+=e[0]*n+e[2]*r,e[5]+=e[1]*n+e[3]*r}},{key:"rotate",value:function(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],c=Math.sin(t),s=Math.cos(t);return e[0]=n*s+i*c,e[1]=r*s+a*c,e[2]=n*-c+i*s,e[3]=r*-c+a*s,e[4]=o,e[5]=u,e}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Vector2=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],r=arguments.length<=1||void 0===arguments[1]?0:arguments[1];n(this,e),this.x=t,this.y=r}return r(e,[{key:"getArray",value:function(){return[this.x,this.y]}},{key:"transformByMat2d",value:function(e){var t=this.x,n=this.y;return this.x=e[0]*t+e[2]*n+e[4],this.y=e[1]*t+e[3]*n+e[5],this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=0,i=1;this.x=e[0]*t+e[4]*n+e[8]*r+e[12]*i,this.y=e[1]*t+e[5]*n+e[9]*r+e[13]*i;var a=e[3]*t+e[7]*n+e[11]*r+e[15]*i;return this.x=this.x/a,this.y=this.y/a,this}},{key:"dotProduct",value:function(e){return this.x*e.x+this.y*e.y}},{key:"scale",value:function(e){this.x*=e,this.y*=e}},{key:"swapToModelPosition",value:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];this.x=this.x*e-t,this.y=n-this.y*e}},{key:"isEqualTo",value:function(e){return e.x===this.x&&e.y===this.y}}],[{key:"generateVector",value:function(t,n){return new e(n[0]-t[0],n[1]-t[1])}},{key:"zeroVector",value:function(){return new e}},{key:"copy",value:function(t){return new e(t.x,t.y)}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Vector3=function(){function e(){n(this,e)}return r(e,null,[{key:"applyMatrix4",value:function(e,t){var n=e[0],r=e[1],i=e[2],a=1;e[0]=t[0]*n+t[4]*r+t[8]*i+t[12]*a,e[1]=t[1]*n+t[5]*r+t[9]*i+t[13]*a,e[2]=t[2]*n+t[6]*r+t[10]*i+t[14]*a;var o=t[3]*n+t[7]*r+t[11]*i+t[15]*a;return e[0]=e[0]/o,e[1]=e[1]/o,e[2]=e[2]/o,e}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Vector4=function(){function e(){n(this,e)}return r(e,null,[{key:"applyMatrix4",value:function(e,t){var n=e[0],r=e[1],i=e[2],a=e[3];return e[0]=t[0]*n+t[4]*r+t[8]*i+t[12]*a,e[1]=t[1]*n+t[5]*r+t[9]*i+t[13]*a,e[2]=t[2]*n+t[6]*r+t[10]*i+t[14]*a,e[3]=t[3]*n+t[7]*r+t[11]*i+t[15]*a,e}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.IAnimation=function(){function e(){n(this,e),this.animationHandler=null,this.isAnimating=!1}return r(e,[{key:"startAnimating",value:function(){var e=this;this.isAnimating=!0,this.frameIndex=0,this.animationHandler=requestAnimationFrame(function(){e.enterFrame()})}},{key:"stopAnimating",value:function(){cancelAnimationFrame(this.animationHandler),this.isAnimating=!1}},{key:"enterFrame",value:function(){var e=this;this.frameIndex++,this.animationHandler=requestAnimationFrame(function(){e.enterFrame()})}},{key:"destory",value:function(){this.stopAnimating()}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.TouchManager=function(){function e(){n(this,e)}return r(e,null,[{key:"touchStartEventName",value:function(){return void 0===document.ontouchstart?"mousedown":"touchstart"}},{key:"touchMoveEventName",value:function(){return void 0===document.ontouchmove?"mousemove":"touchmove"}},{key:"touchEndEventName",value:function(){return void 0===document.ontouchend?"mouseup":"touchend"}},{key:"addTapListener",value:function(t,n){t.addEventListener(e.touchEndEventName(),n,!1)}},{key:"removeTapListener",value:function(t,n){t.removeEventListener(e.touchEndEventName(),n,!1)}},{key:"addTouchListener",value:function(t,n,r){var i=arguments.length<=3||void 0===arguments[3]?null:arguments[3];t.addEventListener(e.touchStartEventName(),function(i){n(i),t.addEventListener(e.touchMoveEventName(),r,!1)},!1),t.addEventListener(e.touchEndEventName(),function(n){i&&i(n),t.removeEventListener(e.touchMoveEventName(),r,!1)},!1)}},{key:"removeTouchListener",value:function(t,n,r){var i=arguments.length<=3||void 0===arguments[3]?null:arguments[3];t.removeEventListener(e.touchStartEventName(),n,!1),t.removeEventListener(e.touchMoveEventName(),r,!1),i&&t.removeEventListener(e.touchEndEventName(),i,!1)}}]),e}()}])});